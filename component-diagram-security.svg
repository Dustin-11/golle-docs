<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="600px" preserveAspectRatio="none" style="width:729px;height:600px;background:#FFFFFF;" version="1.1" viewBox="0 0 729 600" width="729px" zoomAndPan="magnify"><defs/><g><!--class Middleware--><g class="entity" data-entity="Middleware" data-source-line="4" data-uid="ent0002" id="entity_Middleware"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="214.2051" x="384" y="7"/><ellipse cx="399" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M401.9688,28.6406 Q401.3906,28.9375 400.75,29.0781 Q400.1094,29.2344 399.4063,29.2344 Q396.9063,29.2344 395.5781,27.5938 Q394.2656,25.9375 394.2656,22.8125 Q394.2656,19.6875 395.5781,18.0313 Q396.9063,16.375 399.4063,16.375 Q400.1094,16.375 400.75,16.5313 Q401.4063,16.6875 401.9688,16.9844 L401.9688,19.7031 Q401.3438,19.125 400.75,18.8594 Q400.1563,18.5781 399.5313,18.5781 Q398.1875,18.5781 397.5,19.6563 Q396.8125,20.7188 396.8125,22.8125 Q396.8125,24.9063 397.5,25.9844 Q398.1875,27.0469 399.5313,27.0469 Q400.1563,27.0469 400.75,26.7813 Q401.3438,26.5 401.9688,25.9219 L401.9688,28.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182.2051" x="413" y="27.8467">Correlation ID Middleware</text><line style="stroke:#181818;stroke-width:0.5;" x1="385" x2="597.2051" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="385" x2="597.2051" y1="47" y2="47"/></g><!--class Controller--><g class="entity" data-entity="Controller" data-source-line="5" data-uid="ent0003" id="entity_Controller"><rect fill="#F1F1F1" height="80.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.2764" x="417.5" y="132"/><ellipse cx="453.2466" cy="148" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M456.2153,153.6406 Q455.6372,153.9375 454.9966,154.0781 Q454.356,154.2344 453.6528,154.2344 Q451.1528,154.2344 449.8247,152.5938 Q448.5122,150.9375 448.5122,147.8125 Q448.5122,144.6875 449.8247,143.0313 Q451.1528,141.375 453.6528,141.375 Q454.356,141.375 454.9966,141.5313 Q455.6528,141.6875 456.2153,141.9844 L456.2153,144.7031 Q455.5903,144.125 454.9966,143.8594 Q454.4028,143.5781 453.7778,143.5781 Q452.4341,143.5781 451.7466,144.6563 Q451.0591,145.7188 451.0591,147.8125 Q451.0591,149.9063 451.7466,150.9844 Q452.4341,152.0469 453.7778,152.0469 Q454.4028,152.0469 454.9966,151.7813 Q455.5903,151.5 456.2153,150.9219 L456.2153,153.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.1729" x="471.8569" y="152.8467">Controller</text><line style="stroke:#181818;stroke-width:0.5;" x1="418.5" x2="563.7764" y1="164" y2="164"/><line style="stroke:#181818;stroke-width:0.5;" x1="418.5" x2="563.7764" y1="172" y2="172"/><ellipse cx="428.5" cy="185.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.2764" x="437.5" y="188.9951">AuthorizePhone()</text><ellipse cx="428.5" cy="201.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.0215" x="437.5" y="205.292">UpdateOtp()</text></g><!--class AuthService--><g class="entity" data-entity="AuthService" data-source-line="9" data-uid="ent0004" id="entity_AuthService"><rect fill="#F1F1F1" height="80.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="202.5176" x="389.5" y="290"/><ellipse cx="444.2319" cy="306" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M447.2007,311.6406 Q446.6226,311.9375 445.9819,312.0781 Q445.3413,312.2344 444.6382,312.2344 Q442.1382,312.2344 440.8101,310.5938 Q439.4976,308.9375 439.4976,305.8125 Q439.4976,302.6875 440.8101,301.0313 Q442.1382,299.375 444.6382,299.375 Q445.3413,299.375 445.9819,299.5313 Q446.6382,299.6875 447.2007,299.9844 L447.2007,302.7031 Q446.5757,302.125 445.9819,301.8594 Q445.3882,301.5781 444.7632,301.5781 Q443.4194,301.5781 442.7319,302.6563 Q442.0444,303.7188 442.0444,305.8125 Q442.0444,307.9063 442.7319,308.9844 Q443.4194,310.0469 444.7632,310.0469 Q445.3882,310.0469 445.9819,309.7813 Q446.5757,309.5 447.2007,308.9219 L447.2007,311.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.5537" x="464.7319" y="310.8467">AuthService</text><line style="stroke:#181818;stroke-width:0.5;" x1="390.5" x2="591.0176" y1="322" y2="322"/><line style="stroke:#181818;stroke-width:0.5;" x1="390.5" x2="591.0176" y1="330" y2="330"/><ellipse cx="400.5" cy="343.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176.5176" x="409.5" y="346.9951">authorizePhoneNumber()</text><ellipse cx="400.5" cy="359.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120.9072" x="409.5" y="363.292">updateOtpSend()</text></g><!--class OTPService--><g class="entity" data-entity="OTPService" data-source-line="13" data-uid="ent0005" id="entity_OTPService"><rect fill="#F1F1F1" height="96.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="144.7949" x="577.5" y="472.5"/><ellipse cx="607.368" cy="488.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M610.3368,494.1406 Q609.7586,494.4375 609.118,494.5781 Q608.4774,494.7344 607.7743,494.7344 Q605.2743,494.7344 603.9461,493.0938 Q602.6336,491.4375 602.6336,488.3125 Q602.6336,485.1875 603.9461,483.5313 Q605.2743,481.875 607.7743,481.875 Q608.4774,481.875 609.118,482.0313 Q609.7743,482.1875 610.3368,482.4844 L610.3368,485.2031 Q609.7118,484.625 609.118,484.3594 Q608.5243,484.0781 607.8993,484.0781 Q606.5555,484.0781 605.868,485.1563 Q605.1805,486.2188 605.1805,488.3125 Q605.1805,490.4063 605.868,491.4844 Q606.5555,492.5469 607.8993,492.5469 Q608.5243,492.5469 609.118,492.2813 Q609.7118,492 610.3368,491.4219 L610.3368,494.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.7549" x="624.672" y="493.3467">OTPService</text><line style="stroke:#181818;stroke-width:0.5;" x1="578.5" x2="721.2949" y1="504.5" y2="504.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="578.5" x2="721.2949" y1="512.5" y2="512.5"/><ellipse cx="588.5" cy="526.1484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.7432" x="597.5" y="529.4951">generateOtp()</text><ellipse cx="588.5" cy="542.4453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118.7949" x="597.5" y="545.792">verifyOtpMatch()</text><ellipse cx="588.5" cy="558.7422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.1543" x="597.5" y="562.0889">verifyOtpAge()</text></g><!--class AuthRepository--><g class="entity" data-entity="AuthRepository" data-source-line="18" data-uid="ent0006" id="entity_AuthRepository"><rect fill="#F1F1F1" height="145.7813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="210.2217" x="163" y="448"/><ellipse cx="209.9185" cy="464" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M212.8872,469.6406 Q212.3091,469.9375 211.6685,470.0781 Q211.0278,470.2344 210.3247,470.2344 Q207.8247,470.2344 206.4966,468.5938 Q205.1841,466.9375 205.1841,463.8125 Q205.1841,460.6875 206.4966,459.0313 Q207.8247,457.375 210.3247,457.375 Q211.0278,457.375 211.6685,457.5313 Q212.3247,457.6875 212.8872,457.9844 L212.8872,460.7031 Q212.2622,460.125 211.6685,459.8594 Q211.0747,459.5781 210.4497,459.5781 Q209.106,459.5781 208.4185,460.6563 Q207.731,461.7188 207.731,463.8125 Q207.731,465.9063 208.4185,466.9844 Q209.106,468.0469 210.4497,468.0469 Q211.0747,468.0469 211.6685,467.7813 Q212.2622,467.5 212.8872,466.9219 L212.8872,469.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8848" x="230.4185" y="468.8467">AuthRepository</text><line style="stroke:#181818;stroke-width:0.5;" x1="164" x2="372.2217" y1="480" y2="480"/><line style="stroke:#181818;stroke-width:0.5;" x1="164" x2="372.2217" y1="488" y2="488"/><ellipse cx="174" cy="501.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184.2217" x="183" y="504.9951">getAuthByPhoneNumber()</text><ellipse cx="174" cy="517.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.9395" x="183" y="521.292">verifyOtpSent()</text><ellipse cx="174" cy="534.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.6768" x="183" y="537.5889">revokeAuth()</text><ellipse cx="174" cy="550.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.3203" x="183" y="553.8857">grantAuth()</text><ellipse cx="174" cy="566.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.6475" x="183" y="570.1826">updateOtp()</text><ellipse cx="174" cy="583.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.542" x="183" y="586.4795">createAuthState()</text></g><g class="entity" data-entity="GMN11" data-source-line="35" data-uid="ent0012" id="entity_GMN11"><path d="M112,303 L112,358.3984 A0,0 0 0 0 112,358.3984 L353.7524,358.3984 A0,0 0 0 0 353.7524,358.3984 L353.7524,334.5 L389.46,330.5 L353.7524,326.5 L353.7524,313 L343.7524,303 L112,303 A0,0 0 0 0 112,303" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M343.7524,303 L343.7524,313 L353.7524,313 L343.7524,303" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.2207" x="118" y="320.0669">Logger Service</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.7163" x="118" y="335.1997">retry (utility)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.6201" x="118" y="350.3325">Private helper methods (internal)</text></g><g class="entity" data-entity="GMN14" data-source-line="41" data-uid="ent0015" id="entity_GMN14"><path d="M6,508.5 L6,533.6328 A0,0 0 0 0 6,533.6328 L127.5088,533.6328 A0,0 0 0 0 127.5088,533.6328 L127.5088,526.5 L162.91,521 L127.5088,518.5 L127.5088,518.5 L117.5088,508.5 L6,508.5 A0,0 0 0 0 6,508.5" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M117.5088,508.5 L117.5088,518.5 L127.5088,518.5 L117.5088,508.5" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.3765" x="12" y="525.5669">Prisma Service</text></g><g class="entity" data-entity="GMN17" data-source-line="45" data-uid="ent0018" id="entity_GMN17"><path d="M408,508.5 L408,533.6328 A0,0 0 0 0 408,533.6328 L541.6011,533.6328 A0,0 0 0 0 541.6011,533.6328 L541.6011,526.5 L577.24,521 L541.6011,518.5 L541.6011,518.5 L531.6011,508.5 L408,508.5 A0,0 0 0 0 408,508.5" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M531.6011,508.5 L531.6011,518.5 L541.6011,518.5 L531.6011,508.5" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.4688" x="414" y="525.5669">hashOTP (utility)</text></g><!--link Middleware to Controller--><g class="link" data-entity-1="Middleware" data-entity-2="Controller" data-source-line="27" data-uid="lnk7" id="link_Middleware_Controller"><path codeLine="27" d="M491,55.04 C491,75.85 491,100.94 491,125.77" fill="none" id="Middleware-to-Controller" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="491,131.77,495,122.77,491,126.77,487,122.77,491,131.77" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.5547" x="492" y="98.0669">applies before request</text></g><!--link Controller to AuthService--><g class="link" data-entity-1="Controller" data-entity-2="AuthService" data-source-line="28" data-uid="lnk8" id="link_Controller_AuthService"><path codeLine="28" d="M491,213.27 C491,236.74 491,260.35 491,283.8" fill="none" id="Controller-to-AuthService" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="491,289.8,495,280.8,491,284.8,487,280.8,491,289.8" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29.1104" x="492" y="256.0669">calls</text></g><!--link AuthService to OTPService--><g class="link" data-entity-1="AuthService" data-entity-2="OTPService" data-source-line="29" data-uid="lnk9" id="link_AuthService_OTPService"><path codeLine="29" d="M524.33,371.02 C549.19,400.49 579.4009,436.3042 605.8009,467.5942" fill="none" id="AuthService-to-OTPService" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="609.67,472.18,606.9235,462.7218,606.4457,468.3585,600.8091,467.8807,609.67,472.18" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29.7832" x="562" y="414.0669">uses</text></g><!--link AuthService to AuthRepository--><g class="link" data-entity-1="AuthService" data-entity-2="AuthRepository" data-source-line="30" data-uid="lnk10" id="link_AuthService_AuthRepository"><path codeLine="30" d="M444.25,371.02 C417.94,393.26 388.8528,417.8473 358.0028,443.9173" fill="none" id="AuthService-to-AuthRepository" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="353.42,447.79,362.876,445.0361,357.239,444.5627,357.7124,438.9257,353.42,447.79" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.1709" x="408" y="414.0669">reads/writes</text></g><!--SRC=[TLB1JkCm4BtdAsQvqDKgSEy1gHI4a5fQ5VW0aqmI2ySsuqbHMUs_Cmv9wq8tXyX-dddpPjwSmzeeoy_B1SnTwvr5ot2ZLKsgXSeHt3bZ41wnw4ZpJWwqrGL2zgl4Ibk4pUtyQVPmjxY5mgWG83k7FCyFPA6_PeUmixaZGgDOEmltDx3KPMdmNH6UWGh9DKsQEyiKbH3yXGpa-pFhk76aFt3TIA79xm5-zgLYNB6FoB-K8oQCyaSITKJoqBKlI7kgRgHwH5l-e5izhR-prMYH3jLxR8kagvqWIyL5ynEUrNXIwGQz2veTxH9wZY_NkrDYzuGYblSeuTQzOipQG-AivIEaIqVM8mMX8Ft0M0w3m2zdDuDteT5-C3VnxEBYAZLh2ifxep702yes8H2-THWOiYGepw-Ep9b2eOoHLKh169ICV0fTm1CXtqOtbOAg39VlihmnN7fO-QXU6M5WRMIdBwrZX8dy8Q1NqK0enlMLphF-tM35uAeZeJAiXQjhQI5125aAJmRoVg9hqjl8sg3n4joYB5qPOA8j8uaK2P8DWxxEYN99FrzaeLM7Yl_BJ8ObMOqAZI2fhZ7n4m00]--></g></svg>